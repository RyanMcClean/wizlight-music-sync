{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Runtime_Setup_Part_1",
            "type": "shell",
            "windows": {
                "command": "${workspaceFolder}/QUBProject40099112/env/Scripts/python.exe ${workspaceFolder}/QUBProject40099112/bulbControl/manage.py makemigrations bulbControlFrontend"
            },
            "linux": {
                "command": "${workspaceFolder}/QUBProject40099112/env/bin/python3 ${workspaceFolder}/QUBProject40099112/bulbControl/manage.py makemigrations bulbControlFrontend"
            },
            "presentation": {
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "close": true,
            },
            "dependsOn": "install_requirements"
        },
        {
            "label": "Runtime_Setup_Part_2",
            "type": "shell",
            "windows": {
                "command": "${workspaceFolder}/QUBProject40099112/env/Scripts/python.exe ${workspaceFolder}/QUBProject40099112/bulbControl/manage.py migrate"
            },
            "linux": {
                "command": "${workspaceFolder}/QUBProject40099112/env/bin/python3 ${workspaceFolder}/QUBProject40099112/bulbControl/manage.py migrate"
            },
            "dependsOn": "Runtime_Setup_Part_1",
            "presentation": {
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "close": true
            }
        },
        {
            "label": "install_requirements",
            "type": "shell",
            "windows": {
                "command": "Foreach ($package in (Get-Content -Path ${workspaceFolder}/QUBProject40099112/bulbControl/requirements.txt)) { ${workspaceFolder}/QUBProject40099112/env/Scripts/pip.exe install $package }"
            },
            "linux": {
                "command": "cat ${workspaceFolder}/QUBProject40099112/bulbControl/requirements.txt | sed -e '/^\\s*#.*$/d' -e '/^\\s*$/d' | xargs -n 1 ${workspaceFolder}/QUBProject40099112/env/bin/pip3 install; if [ $? -eq 123 ]; then echo 'Running on linux pyaudiowpatch cannot be installed, do not be alarmed by the error'; fi"
            },
            "dependsOn": "start_venv",
            "presentation": {
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "close": true
            }
        },
        // The below task will fail if the interprester is set to a 
        {
            "label": "setup_venv",
            "type": "shell",
            "windows": {
                "command": "if (-not (Test-Path -Path ${workspaceFolder}/QUBProject40099112/env)) { ${command:python.interpreterPath} -m venv ${workspaceFolder}/QUBProject40099112/env }",
            },
            "linux": {
                "command": "if [ -d ${workspaceFolder}/QUBProject40099112/env ]; then ${command:python.interpreterPath} -m venv ${workspaceFolder}/QUBProject40099112/env; fi",
            },
            "presentation": {
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "close": true
            }
        },
        {
            "label": "start_venv",
            "type": "shell",
            "windows": {
                "command": "${workspaceFolder}/QUBProject40099112/env/Scripts/Activate.ps1"
            },
            "linux": {
                "command": "source ${workspaceFolder}/QUBProject40099112/env/bin/activate"
            },
            "dependsOn": "setup_venv",
            "presentation": {
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "close": true
            }
        }
    ]
}
